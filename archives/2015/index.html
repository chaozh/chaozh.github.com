<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Archives: 2015 | chaozh.com</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="系统架构,移动开发,独立游戏">
<meta property="og:type" content="website">
<meta property="og:title" content="chaozh.com">
<meta property="og:url" content="http://chaozh.github.com/archives/2015/index.html">
<meta property="og:site_name" content="chaozh.com">
<meta property="og:description" content="系统架构,移动开发,独立游戏">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="chaozh.com">
<meta name="twitter:description" content="系统架构,移动开发,独立游戏">
  
    <link rel="alternative" href="/atom.xml" title="chaozh.com" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">chaozh.com</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">超然台上仙的知识库|系统架构,移动开发,独立游戏</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/php-development-env-setup-in-win7-x64.html">PHP-WIN</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://chaozh.github.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-stock-analysis" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/01/stock-analysis/" class="article-date">
  <time datetime="2015-11-01T18:43:50.000Z" itemprop="datePublished">2015-11-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/金融/">金融</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/01/stock-analysis/">证券投资分析</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#1. 基本理论</p>
<p>#2.<br>基本分析法：（把握价格走势）证券价值及价格基本要素分析，评估证券投资价值与合理价位，提出投资建议（宏观经济形势/行业特征/上市公司基本财务数据）<br>技术分析法：（把握局部走势）证券市场过去现在市场行为进行分析，应用数学逻辑探索变化规律来预测未来变化<br>量化分析法：</p>
<p>静态/动态套期保值，主动/被动套期保值<br>学术分析：价格偏离信息内容；基本分析：价格偏离价值；技术分析法：市场供求；行为分析：心里及行为不平衡</p>
<p>价值发现型：风险相对分散理念；价值培养型：风险共担理论</p>
<p>#3. 有价证券的价值分析与估值方法<br>虚拟价值–未来预期收益<br>市场价值与预期收益多少成正比，与市场利率高低成反比<br>货币的时间价值、复利、贴现 $ FV = PV(1+i)^n $, $ PV = FV/(1+i)^n$<br>现金流贴现与净现值：贴现率与现金流（贴现现值）成反比<br>市盈率(P/E) 周期弱公司，如制造业，服务业<br>市净率(P/B) 周期型公司<br>市值回报增长比(PEG) IT公司<br>权益价值=资产价值-负债价值(即账面价值)<br>现金流与贴现率：债券必要回报率(债券贴现率) = 真实无风险收益率+预期通货膨胀率+风险溢价(无风险利率)<br>(1+名义无风险收益率) = (1+真实无风险收益率) * (1+预期通货膨胀率)<br>零增长模型内部收益率：股票净现值 = 股票内在价值 - 投资成本 = 每期收益/必要收益率 - 投资成本<br>全价报价缺点含混债券价格涨跌真实原因、净价报价<br>付息债券定价，累息债券定价<br>赎回收益率（一般在利率调低时出现）<br>利率风险结构，期限结构（期限不同，收益率不同）<br>当期收益率Y=C/P 每年利息收益/债券价格，到期收益率（缺点零息债券不能用），内部报酬率(IRR)<br>PV=T/U, p理论价格，发行时价格</p>
<p>利息计算：</p>
<ol>
<li>短期债券ACT 360/180 累计利息 = 面值<em>年利率/每年付息次数</em>ACT/180</li>
<li>中长期 365天(交易所) </li>
<li>贴现式 实际天数计算</li>
</ol>
<p>期限结构与收益率曲线<br>内部收益率（报酬率）NPV V(内在价值) P(市价) 关系 V=P则NPV=0<br>零增长与可变增长模型（股息增长率）</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://chaozh.github.com/2015/11/01/stock-analysis/" data-id="cjap5ltw10077b8rlm1oes7nc" class="article-share-link">Share</a>
      
        <a href="http://chaozh.github.com/2015/11/01/stock-analysis/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/债券/">债券</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/基金/">基金</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/期货/">期货</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/股票/">股票</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-whats-bad-in-zookeeper-design" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/15/whats-bad-in-zookeeper-design/" class="article-date">
  <time datetime="2015-10-15T20:00:11.000Z" itemprop="datePublished">2015-10-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/系统经验/">系统经验</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/15/whats-bad-in-zookeeper-design/">Zookeeper系统的不足</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>之前总结过Zookeeper的各种设计优点，但是这个系统的缺陷与优点同样突出，本文就是结合自己的使用经验，业界给出的评价对ZK的缺点进行的归纳，一方面归纳使用表现上的不足，另一方面根据个人经验总结出系统本身功能设计时的就存在的缺陷。同时也思考了相应对策与改进的办法，算是本人对ZK设计的完整的思考总结吧。最后还关注了下etcd这个后起之秀的设计，看看它是否已经弥补了ZK的不足，能否担当后继者。</p>
<h2 id="1-实际使用暴露的不足"><a href="#1-实际使用暴露的不足" class="headerlink" title="1.实际使用暴露的不足"></a>1.实际使用暴露的不足</h2><p>尽管ZK已经在工业界大量使用，但实际使用ZK时就会发现自己仍然面临种种问题，这里总结一下实际使用中系统暴露出的种种不足。</p>
<ol>
<li><p>API使用复杂</p>
<p>使用ZK最直观的感觉就是客户端API使用起来特别麻烦，因为ZK的实际逻辑模型是文件存储，其他逻辑都需要结合使用临时节点和回调机制来实现，API接口与实际需求之间差距非常大，说白了就是ZK官方提供的API太过底层，而且表现力不足。没有http访问接口，只能通过API访问，导致兼容性与表现各异。比如一个细节很容易坑人：</p>
<p>&gt;</p>
<blockquote>
<p>ZK不能确保任何客户端能够获取（即Read Request）到一样的数据，需要客户端自己同步：方法是客户端在获取数据之前调用org.apache.zookeeper.Async(Callback.VoidCallback, java.lang.Object) 完成sync操作. </p>
</blockquote>
</li>
<li><p>实际客户端逻辑复杂</p>
<p>因为ZK提供的是非常底层的API，所以要实现一个基础需求，开发者用户自己需要依靠这些底层API在客户端实现并维护一个异常复杂的逻辑，甚至官方自己都一度不能提供正确的逻辑。比如实现分布式锁时，需要开发者自己在客户端处理异步请求锁的时间判断与仲裁，很容易出错。因此实现了多种ZK常用功能的开源项目Curator取代了官方成为ZK事实标准上的客户端了，总算让开发者使用ZK时稍微轻松一些，能够专注到自己的业务逻辑上面。但是Curator方案仍然有问题无法避免。</p>
<blockquote>
<p>而 Curator 这类客户端的复杂性使得支持多语言环境较难，怎样保证两个语言的 recipe 的是行为一致的？基本没有办法通过自动化测试来保证正确性，只能不停地线上踩坑一个个排查。</p>
</blockquote>
</li>
<li><p>ZK异常状态判断</p>
<p>比逻辑更复杂的是开发者总是需要自己同时处理ZK通信中的异常状态，需要正确处理CONNECTION LOSS(连接断开) 和 SESSION EXPIRED(Session 过期)两类连接异常。一个典型的难题就是session的超时机制的问题</p>
<blockquote>
<p>The client will stay in disconnected state until the TCP connection is re-established with the cluster, at which point the watcher of the expired session will receive the “session expired” notification.</p>
</blockquote>
<p>甚至需要考虑包括业务方系统load变高，或者发生长时间gc，导致ZK重连甚至session过期的问题。</p>
</li>
<li><p>回调次数限制</p>
<p>ZK中所有Watch回调通知都是一次性的。同一个ZK客户端对某一个节点注册相同的watch，也只会收到一次通知。节点数据的版本变化会触发NodeDataChanged回调，这导致需要重复注册，而如果节点数据的更新频率很高的话，客户端肯定就无法收到所有回调通知了。</p>
</li>
<li><p>Zab协议与全系统的有效性</p>
<p>实际应用中ZK系统整体可靠性也不一定有保证，比如在跨机房部署方面，由于ZK集群只能有一个Leader，因此一旦机房之间连接出现故障，Leader就只能照顾一个机房，其他机房运行的业务模块由于没有Leader也都只能停掉。于是所有流量集中到有Leader的那个机房，很容易造成系统crash。</p>
<p>同时ZK对于网络隔离极度敏感，导致系统对于网络的任何风吹草动都会做出激烈反应。这是Zab协议本身的设计，一旦出现网络隔离，ZK就要发起选举流程。悲催的是Zab协议的选举过程比较慢，期间集群没有Leader也不能提供服务。造成本来半秒一秒的网络隔离造成的不可用时间被放大为选举不可用时间。</p>
</li>
<li><p>性能</p>
<p>ZK本身的性能比较有限。典型的ZK的tps大概是一万多，单个节点平均连接数是6K，watcher是30万，吞吐似乎还可以，但是时延就没那么乐观了。特别</p>
</li>
</ol>
<p>   响应时间、网络、缓存</p>
<p>   ​</p>
<ol>
<li><p>服务极限与可扩展性</p>
<p>​</p>
</li>
<li><p>存储极限与可扩展性</p>
<p>​</p>
</li>
</ol>
<h2 id="2-需求满足缺陷"><a href="#2-需求满足缺陷" class="headerlink" title="2.需求满足缺陷"></a>2.需求满足缺陷</h2><p>设计层面上的不足</p>
<ol>
<li>事务API能力不足</li>
<li>中心无仲裁能力</li>
<li>回调次数</li>
<li>可扩展性</li>
<li>Zab协议</li>
</ol>
<h2 id="3-怎样更好的设计"><a href="#3-怎样更好的设计" class="headerlink" title="3. 怎样更好的设计"></a>3. 怎样更好的设计</h2><ol>
<li><p>更丰富有效的API</p>
<p> 支持多IP，自动处理重连与恢复，服务端可以动态加入移除</p>
</li>
<li>委托服务端处理能力<br> script能力？像redis支持luaScript<br> 节点单独超时时间设计</li>
<li>横向可扩展性</li>
<li>JVM</li>
</ol>
<h2 id="4-继任者etcd？"><a href="#4-继任者etcd？" class="headerlink" title="4. 继任者etcd？"></a>4. 继任者etcd？</h2><ol>
<li>raft协议取代zab</li>
<li>go GC</li>
<li>restful API</li>
</ol>
<h2 id="5-参考资料"><a href="#5-参考资料" class="headerlink" title="5. 参考资料"></a>5. 参考资料</h2><ol>
<li><a href="http://codemacro.com/2014/09/21/zk-watch-benchmark" target="_blank" rel="noopener">zookeeper节点数与watch的性能测试</a></li>
<li><a href="http://blog.csdn.net/wwwsq/article/details/7644445" target="_blank" rel="noopener">对Zookeeper的一些分析</a></li>
<li><a href="http://cloud.51cto.com/art/201508/487445.htm" target="_blank" rel="noopener">ZooKeeper真的low吗？上千节点场景配置服务讨论</a></li>
<li><a href="http://www.aboutyun.com/blog-1328-2362.html" target="_blank" rel="noopener">Zookeeper常见问题整理</a></li>
<li><a href="https://www.douban.com/note/277477728/" target="_blank" rel="noopener">ZAB问题总结</a></li>
<li><a href="http://www.infoq.com/cn/articles/coreos-analyse-etcd" target="_blank" rel="noopener">剖析etcd</a></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://chaozh.github.com/2015/10/15/whats-bad-in-zookeeper-design/" data-id="cjap5ltwu008pb8rlln41m6wf" class="article-share-link">Share</a>
      
        <a href="http://chaozh.github.com/2015/10/15/whats-bad-in-zookeeper-design/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/paxos/">paxos</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/raft/">raft</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/zookeeper/">zookeeper</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-weixin-backend-arch-design" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/12/weixin-backend-arch-design/" class="article-date">
  <time datetime="2015-10-12T19:12:13.000Z" itemprop="datePublished">2015-10-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/系统架构/">系统架构</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/12/weixin-backend-arch-design/">微信后端存储架构学习</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>学习了解一下微信的后端存储架构。使用微信的过程中就能发现微信不像QQ并没有漫游所有聊天信息，记录基本完全是在本地存储的，因此后台存储难度应该不大。<br><a href="http://www.infoq.com/cn/presentations/weixin-background-memory-architecture#0-tsina-1-31024-397232819ff9a47a7b7e80a40613cfe1" target="_blank" rel="noopener">视频与ppt地址</a>，演讲人微信基础平台组许家滔sunnyxu</p>
<p>主要介绍内部产品QuorumKV，具体关注kv系统的强一致性。</p>
<p>需求背景：微信全球数据布局分在上海，天津，深圳，香港，加拿大，乃至同城多园区分布等等</p>
<p>系统要求：分布式强一致性（不需要应用层再设计），同城园区灾备，类SQL查询</p>
<p>存储信息：聊天记录，通讯录，个人信息，朋友圈</p>
<p>存储介质：包含mem，ssd，sas</p>
<p>增加数据流程：实现方法为分组<br>序列号发生器：微信后台与终端交互使用序列号进行数据同步，偏序，实现方法为仅一个client操作<br>（如果还要实现后来这些需求，前面这些hack实现是否有必要？）</p>
<p>修改value：1.可以覆盖；2.可以根据条件修改；实现方法为每次变更选举（by key），分为1.检查版本号；2.向集群发出请求；3.收到请求检查版本号；4.返回选举结果；5.推送结果；（类似Raft？）</p>
<p>问题：容灾成本仍然高(预留机器空间)</p>
<p>权衡点：自治，负载均衡，扩散控制</p>
<p>解决方案：六台机作为一组（挂一台20%增长）跨园区跨机分组</p>
<p>数据sharding：均匀分布指定分段（先算好后直接用，更好可以用hash ring，为何不用一致性hash？可能不均匀与冲突，负载均衡问题），希望终端无状态可以方便的重启防止内存泄露</p>
<p><img src="http://cdn1.infoqstatic.com/statics_s1_20151015-0307/resource/presentations/weixin-background-memory-architecture/zh/slides/xjt.22.jpg" alt="系统架构图"></p>
<p>底层使用所谓bitcask（内存索引加顺序写），同时使用小表系统解决写放大问题</p>
<p>同步流量要求幂等，为每个数据块记版本号，在某个版本号进行某个操作，保底策略:某台机器刚启动问题会要求对端发完整数据块</p>
<p>通信包量：读写的动态合并</p>
<p>异步化：协程，libco</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://chaozh.github.com/2015/10/12/weixin-backend-arch-design/" data-id="cjap5ltwt008mb8rl46kgopws" class="article-share-link">Share</a>
      
        <a href="http://chaozh.github.com/2015/10/12/weixin-backend-arch-design/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/存储/">存储</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-whats-good-in-zookeeper-design" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/29/whats-good-in-zookeeper-design/" class="article-date">
  <time datetime="2015-08-29T10:00:11.000Z" itemprop="datePublished">2015-08-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/系统经验/">系统经验</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/29/whats-good-in-zookeeper-design/">Zookeeper系统的优点</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Zookeeper系统应用越来越广泛，在同一领域内开源软件方面基本没有其他选择处于垄断地位，但是实际用过的人都会觉得这个软件属于可用但又不那么好用的类型。本文是本人结合自己的实际使用经验与思考，同时参考真正大牛对这个系统的分析与评价进行的总结，主要还是想归纳一下真正的使用需求并思考相应对策与改进的办法。</p>
<h2 id="1-常见应用场景"><a href="#1-常见应用场景" class="headerlink" title="1.常见应用场景"></a>1.常见应用场景</h2><p>先归纳一下工程应用中常见的Zookeeper使用场景（以下简称ZK），这里按照个人感觉应用的频率从高到低排序说明。</p>
<ol>
<li><p>可靠存储</p>
<p> 在实际使用中可以表现为配置管理、名字服务，这种应用完全是因为ZK多备份的可靠性强。当然也可以利用回调机制在数据变更时可以进行全体通知。实现起来非常简单而且很有效，所以是应用最广的场景。</p>
</li>
<li><p>集群管理</p>
<p> 利用ZK的通讯与回调机制完成分布式集群的机器状态监视，甚至很多系统中做主从备份时都会在ZK中注册以方便做热备切换。</p>
</li>
<li><p>服务注册发现管理</p>
<p> 由可靠存储加上通知回调机制其实满足了服务注册发现的最基本需求，某些在本人看起来不那么靠谱的应用场景，居然也在采用ZK实现。大有一统天下之势，所有类似的需求都开始采用ZK方案，比较出名的系统比如国内的Dubbo和国外的Kafka(居然还把ZK用在了负载均衡上面)、jStorm、Heron(twitter)等等</p>
</li>
<li><p>选主服务</p>
<p> 选主服务是ZK参考的原始系统Chubby设计出来最初的应用需求，当时是满足BigTable的master选主。ZK最初也是用在HBase里面，而后所有需要选主服务的都在采用，很多KV系统用来方便从多节点中选择一个中心节点（但是本人还真没找到什么）。<br> 需要注意的是有时选主服务在讨论里也被称为分布式锁的一种，很容易混淆概念。的确使用ZK来实现选主服务(实现方法最好跟分布式锁的方法完全一样，这里官方文档都曾经犯过错误)客观上遵循了时间优先原则，但是实际需求并非一定要满足这条，只要保证关键的唯一性就可以了，因此与同步意义上的锁很是有不同的。</p>
</li>
<li><p>分布式同步机制</p>
<p>  即真正的分布式锁，但是实际应用并不常见。本人实现过几次，目前准备运用在表单提交的同步上。</p>
</li>
<li><p>负载均衡</p>
</li>
</ol>
<h2 id="2-特性设计与优势"><a href="#2-特性设计与优势" class="headerlink" title="2.特性设计与优势"></a>2.特性设计与优势</h2><p>ZK主要使用场景远不是满足最初设计时对一致性调解的需求，这么受欢迎是因为其灵活的特性设计，只要简单组合就能满足很多种需求，同样将特性的受欢迎程度按照个人感觉从高到低进行说明</p>
<ol>
<li><p>通知回调机制</p>
<p> 通过创建节点与设置Watcher可以很方便的建立回调通知。ZK的所有应用都基于这个特性，没有这个机制那么机器监控相关的应用都不能处理，也就不会诞生后来在服务注册发现相关的使用方法。实际上为分布式系统提供节点间回调通知方法的系统真的很少，甚至可能只有ZK（大家可以提供一些其他答案？）</p>
</li>
<li><p>可靠存储</p>
<p> 系统设计最初的需求之一，也是ZK特性中实现最好的部分，作为可靠存储ZK基本没出现过问题，仅此一项就可保证其的流行。</p>
</li>
<li><p>连接状态维护</p>
<p> ZK自动维护了客户端所在的应用与服务器通信连接状态的变化，可以比较简单地维护系统中的成员通信情况。主要是不需要自己再去处理麻烦的通信状态监控问题，比如断线后自动释放节点并产生回调。</p>
</li>
<li><p>文件系统模型</p>
<p> 提供文件接口模型而不是锁接口，更具通用性。文件系统模型中文件与目录的概念可以映射多种含有层级关系的其他模型</p>
</li>
<li><p>自增长序列</p>
<p> 这点包含了锁的本质，但是因为zk的模型设计导致判断与仲裁需在客户端进行</p>
</li>
</ol>
<h2 id="3-实现技术选择与优点"><a href="#3-实现技术选择与优点" class="headerlink" title="3.实现技术选择与优点"></a>3.实现技术选择与优点</h2><p>zk本身的系统特性设计很出色，同时选择的实现技术也比较扎实，可谓蕴含相当的分布式系统工程经验在其中。下面结合个人理解讨论下这些实现技术有哪些特别优点与选择时可能的设计思路。</p>
<ol>
<li><p>通讯机制与状态的实现<br> 基于jute进行编解码处理保证通用性，服务器端通信使用nio或netty都是标准选择。</p>
</li>
<li><p>Zab协议与Paxos<br> zk使用Zab协议保证部署的多台机器间构成的整体系统的一致性与可靠性。这个分布式协议类似Paxos但是更加具体有效，实际上Paxos工程实现会碰到很多协议中没有定义的问题,G家员工为在Chubby中使用Paxos算法甚至专门发了一篇文章来说明Paxos工程化踩了多少坑。<br> Zab协议中将选主阶段与正常运行之间的阶段用catch up方式进行弥补，而关键的选主阶段使用了一个极其工程化的算法“fast leader election”（这个算法似乎没有经过形式化证明），这个算法足够粗暴有效，实现起来很简单。<br> 最近Paxos的工程简化版算法Raft很火，所有考虑使用Paxos的系统都在实现Raft协议，其过程与Zab协议很类似，但是选主算法更加简单（可能实现结果是比Zab选主更慢）而且无法如Zab一样简单替换这个部分的算法。个人看法是Zab协议比Raft更容易理解，而且容易工程实现。（为何没有Raft火爆？值得研究，但是Raft目前还没有工业级的系统验证！）</p>
</li>
<li><p>使用JVM<br> zk作为一个以稳定性与一致性为主的系统，性能上面肯定有一点损失。相信大家实现这种系统首先都会考虑要利用语言本身的速度优势尽量弥补系统的性能损失，于是我们就能看到很多c++实现的类zk系统（比如Chubby)，但是这些新系统却没有zk的普及率。<br> 可以说zk的流行中很重要的一点就是牺牲部分可能的性能使用JVM作为底层。正是因为虚拟机的使用屏蔽了各种异构系统底层，让zk可以很容易的稳定部署在多台配置性能都可能各异的机器上。个人理解这也是为什么现在那么多分布式系统都基于JVM技术栈，分布式系统需求的机器多，不可能所有配置都一样，而且机器都需要很容易进行物理替换或是系统升级，目前还只有JVM可以非常简单的提供这种等级的虚拟化屏蔽。<br> 当然最近docker容器技术大放异彩，轻量级虚拟化方案以极快的速度兴起，让各种异构系统有了更简单可定制的底层虚拟化方式，也许有可能改变分布式系统的底层技术栈。</p>
</li>
</ol>
<h2 id="4-参考资料"><a href="#4-参考资料" class="headerlink" title="4. 参考资料"></a>4. 参考资料</h2><ol>
<li><a href="http://blog.buaa.us/talk-about-mq/" target="_blank" rel="noopener">可靠消息队列浅谈</a></li>
<li><a href="http://dockone.io/article/78" target="_blank" rel="noopener">为什么不应该使用ZooKeeper做服务发现</a></li>
<li><a href="http://www.nosqlnotes.net/archives/333" target="_blank" rel="noopener">持续可用与CAP理论 – 一个系统开发者的观点</a></li>
<li><a href="http://www.jasongj.com/2015/01/02/Kafka%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90/" target="_blank" rel="noopener">Kafka深度解析</a></li>
<li><a href="http://shiyanjun.cn/archives/474.html" target="_blank" rel="noopener">Zookeeper架构设计与应用要点</a></li>
<li><a href="https://cwiki.apache.org/ZOOKEEPER/zab-vs-paxos.html" target="_blank" rel="noopener">Zab vs. Paxos</a></li>
<li><a href="http://mp.weixin.qq.com/s?__biz=MzAwMDU1MTE1OQ==&amp;mid=403582309&amp;idx=1&amp;sn=80c006f4e84a8af35dc8e9654f018ace&amp;3rd=MzA3MDU4NTYzMw==&amp;scene=6#rd" target="_blank" rel="noopener">架构师需要了解的Paxos原理、历程及实战</a></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://chaozh.github.com/2015/08/29/whats-good-in-zookeeper-design/" data-id="cjap5ltww008ub8rl3dkvwx1z" class="article-share-link">Share</a>
      
        <a href="http://chaozh.github.com/2015/08/29/whats-good-in-zookeeper-design/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/paxos/">paxos</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/zookeeper/">zookeeper</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-TCP-IP-stack-implementation" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/15/TCP-IP-stack-implementation/" class="article-date">
  <time datetime="2015-08-15T12:29:00.000Z" itemprop="datePublished">2015-08-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/系统架构/">系统架构</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/15/TCP-IP-stack-implementation/">TCP/IP网络栈实现</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>参考 <a href="http://blog.2baxb.me/archives/1174" target="_blank" rel="noopener">翻译：理解TCP/IP网络栈&amp;编写网络应用</a>一文内容。</p>
<h2 id="1-TCP-IP的特性"><a href="#1-TCP-IP的特性" class="headerlink" title="1. TCP/IP的特性"></a>1. TCP/IP的特性</h2><ol>
<li>面向连接<br>这里的连接用什么结构管理？</li>
<li>双向字节流<br> 字节流是什么意思？</li>
<li>顺序投递<br> 能够完全遵循时间顺序投递？</li>
<li>ACK实现可靠性<br> 怎么可靠？</li>
<li>流量控制、阻塞控制</li>
</ol>
<h2 id="2-数据传输流程"><a href="#2-数据传输流程" class="headerlink" title="2. 数据传输流程"></a>2. 数据传输流程</h2><p>网络栈很多层<br><img src="http://blog.2baxb.me/wp-content/uploads/2015/04/1.png" alt="image"></p>
<p>内核层使用socket（因为抽象成文件，会走VFS路径）来管理从用户区拷贝过来的接收与发送的数据缓冲区，socket会关联一个TCP控制块，其包含TCP连接的所有状态数据。（基本回答问题1）</p>
<p>TCP中允许情况下会创建TCP segment，包含两个部分：TCP头＋数据，注意TCP校验和不会中内核中算出，会offload到NIC中处理<br><img src="http://blog.2baxb.me/wp-content/uploads/2015/04/2.png" alt="image"></p>
<p>创建的TCP分段进入IP层中增加IP头，然后执行IP路由（之后下一层是链路层增加链路头，至此形成完整报文）在执行IP路由时回选择一个NIC传输接口，这时会调用NIC驱动程序。如果此时有抓包程序则会在此层进行数据拷贝处理。驱动程序与内核通过请求NIC定义的通讯协议进行传输。</p>
<p>NIC会从系统内存中拷贝数据包，向数据包中增加帧间隙（Inter-Frame Gap，IFG），同步码（preamble）和crc校验和。帧间隙和同步码用于区分数据包的开始（NIC目前是在哪一层？）。NIC会在主机的CPU上产生中断。驱动程序在启动时会注册一个处理中断的函数。操作系统调用中断处理程序，之后中断处理程序会把已发送的数据包返回给操作系统。</p>
<p>除了应用程序直接调用write之外，内核也可以直接调用TCP传输数据，比如接收到ACK并且得知接收方的接收窗口增大之后，内核会创建socket缓冲区剩余数据的TCP片段并且把数据发送给接收者。</p>
<h2 id="3-数据接收流程"><a href="#3-数据接收流程" class="headerlink" title="3.数据接收流程"></a>3.数据接收流程</h2><p>NIC接收到数据包后计算CRC，然后拷贝到驱动提前向内核申请的缓冲区中，之后NIC发出中断。驱动程序会判断它是否能处理新的数据包。<br><img src="http://blog.2baxb.me/wp-content/uploads/2015/04/3.png" alt="image"></p>
<p>驱动向上层发送数据包时，Linux的<code>sk_buff</code>，或者BSD系列内核的<code>mbuf</code>，或者windows的<code>NET_BUFFER_LIST</code>。驱动会把数据包包装成指定的数据结构，并发送到上一层。</p>
<p>之后数据链路层，IP层同样检查数据包是否有效，最后到TCP层查找到对应的TCB，socket接收缓冲区的大小就是TCP接收窗口。TCP吞吐量会随着接收窗口变大而增加。</p>
<h2 id="4-流量控制"><a href="#4-流量控制" class="headerlink" title="4. 流量控制"></a>4. 流量控制</h2><p><img src="http://blog.2baxb.me/wp-content/uploads/2015/04/4.png" alt="image"></p>
<p>步骤3即使用定时器超时机制</p>
<h2 id="5-中断处理"><a href="#5-中断处理" class="headerlink" title="5. 中断处理"></a>5. 中断处理</h2><p>中断比较复杂，例如NIC接收数据产生中断，驱动在释放已经传输的数据包之后调用<code>napi_schedule()</code>函数去处理接收到的数据包，这个函数会请求软中断。<br><img src="http://blog.2baxb.me/wp-content/uploads/2015/04/5.png" alt="image"></p>
<p>在中断上下文被执行之后，软中断的上下文会被执行。中断上下文和软中断上下文会通过相同的线程执行，但是它们会使用不同的栈。并且中断上下文会屏蔽硬件中断；而软中断上下文不会屏蔽硬件中断。</p>
<p>处理接收到的数据包的软中断处理程序是<code>net_rx_action()</code>函数。这个函数会调用驱动程序的<code>poll()</code>函数。而<code>poll()</code>函数会调用<code>netif_receive_skb()</code>函数，并把接收到的数据包一个接一个的发送到上层。在软中断处理结束后，应用程序会从停止的位置重新开始执行完成系统调用。所以才有多队列NIC以解决软中断并发处理瓶颈问题。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://chaozh.github.com/2015/08/15/TCP-IP-stack-implementation/" data-id="cjap5lttf0028b8rljw6lskrf" class="article-share-link">Share</a>
      
        <a href="http://chaozh.github.com/2015/08/15/TCP-IP-stack-implementation/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TCP/">TCP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/内核/">内核</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/网络/">网络</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-finance-basic" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/01/finance-basic/" class="article-date">
  <time datetime="2015-08-01T18:43:50.000Z" itemprop="datePublished">2015-08-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/金融/">金融</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/01/finance-basic/">金融市场基础</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>##金融市场</p>
<ul>
<li>一级市场 即证券发行市场</li>
<li>二级市场（security market） 即证券交易市场</li>
<li><p>期货（futures）标准化交易合约，由期货交易所统一制定</p>
<ul>
<li>上期所 黄金白银、钢等金属、橡胶、燃料油</li>
<li>郑商所 早灿稻、小麦等、玻璃</li>
<li>大商所 玉米大豆、焦炭、焦煤</li>
<li>中金所 股指、国债</li>
</ul>
</li>
<li><p>期货基本制度</p>
<ul>
<li>保证金</li>
<li>每日结算</li>
<li>实物交割</li>
<li>强行平仓</li>
</ul>
</li>
<li>实物交割（physical settlement） 保证期现货价格趋向一致</li>
<li>现金交割（Cash settlement） 股指期货可以现金交割</li>
<li>杠杆交易（leverage）国际融资杠杆比例20～400</li>
<li>保证金（margin） 仅为押金不作为合约金</li>
<li>增补按金（margin-call） 同追加保证金，保证金按维持持仓金额的比例计算，要求在下一交易日前将保证金补足 ？？保证金不是不参与交易吗？？</li>
<li>空头交易（short sale）即卖空交易</li>
<li>定向增发（private placement）上市公司向少数特定投资者非公开发行股份，规定发行对象不能超过10人，发行价不能低于公告前20日交易市场价90%，12个月内不得转让</li>
<li>衍生品（Derivative）远期(非标准化)、期货、期权、掉期</li>
<li>实值期权（in-the-money）即价内期权，执行价与远期价相较有利的期权 期货价格高于执行价格的看涨期权以及期货价格低于执行价格的看跌期权为实值期权。</li>
<li>虚值期权（out-of-the-money）即价外期权 期货价格低于执行价格的看涨期权以及期货价格高于执行价格的看跌期权为虚值期权。</li>
<li>量化宽松（Quantative easing）中央银行在实行零利率或近似零利率政策后，通过购买国债等中长期债券，增加基础货币供给，向市场注入大量流动性资金的干预方式，以鼓励开支和借贷，也被简化地形容为间接增印钞票。量化指扩大货币发行，宽松指减少银行压力，通常在利率等工具不再有效时使用</li>
<li>基本面分析 适用于周期相对比较长的证券价格预测、相对成熟的证券市场以及预测精确度要求不高的领域</li>
<li>借壳上市 指一间私人公司（Private Company）透过把资产注入一间市值较低的已上市公司（壳，Shell），得到该公司一定程度的控股权，利用其上市公司地位，使母公司的资产得以上市。通常该壳公司会被改名。</li>
</ul>
<h2 id="宏观经济"><a href="#宏观经济" class="headerlink" title="宏观经济"></a>宏观经济</h2><ul>
<li>GDP</li>
<li>CPI</li>
<li>新兴市场</li>
<li>同比 环比</li>
<li>流动性</li>
<li>金本位</li>
</ul>
<h2 id="交易规则"><a href="#交易规则" class="headerlink" title="交易规则"></a>交易规则</h2><ul>
<li>深市时间：9：15 ~ 9：30开盘集合、9：30~11：30、13：00~14：57连续、14：57~15：00收盘集合</li>
<li>接收会员竞价申请时间：9：15~9：25、9：30~11：30、13：00~15：00，只有连续竞价阶段允许撤销</li>
<li>市价申报、限价申报</li>
<li>100股为申报基本单位，债券、回购申报以10张为基本单位</li>
<li>债券交易分为净价交易、全价交易</li>
<li>盘中临时停牌复牌集合竞价</li>
<li>集合竞价所有交易以同一价格成交</li>
<li>协议大宗交易，指定交易对手方，9：15~11：30、13：00~15：30</li>
<li>盘后定价大宗交易，当日收盘价逐笔连续撮合，15：05~15：30</li>
<li>盘中停牌涨跌超过20%，临时停牌至14：57，复牌集合竞价再进行收盘集合竞价</li>
<li>9：25前停牌，当日复牌实现开盘集合竞价，复牌后继续当日交易；9：30后临时停牌，盘中集合竞价，复牌后继续当日交易</li>
<li>交易信息：即时行情、证券指数、证券交易公开信息</li>
</ul>
<h2 id="财务分析"><a href="#财务分析" class="headerlink" title="财务分析"></a>财务分析</h2><h3 id="利润表"><a href="#利润表" class="headerlink" title="利润表"></a>利润表</h3><p>营业收入-营业成本=毛利，最能反映盈利能力</p>
<ul>
<li><p>毛利率方便同行业比较，变动趋势及同行业对比是利润表分析的重点</p>
</li>
<li><p>营业利润反应企业主要经营活动的盈利状况, 其中“公允价值变动损益+投资收益+汇<br>兑损益”三个科目如果是损失的话，会在报表上以负数列示。资产减值损失为负表示资<br>产减值损失的转回，是操纵利<br>润的一个经典方法。</p>
</li>
<li><p>营业利润+营业外收入-营业外支出=利润总额 反应企业总体的盈利水平</p>
</li>
<li>利润总额-所得税=净利润，反正归属于政府的所得税费的部分，剩余可以供企业自己<br>支配的盈利，该部分金额可用于支付股利等。</li>
</ul>
<p>具体步骤：</p>
<ol>
<li>从净利润入手，看盈利是正或是负，是哪些项目具体导致了净利润的正负<br>水平</li>
<li>分解利润表为四部分（毛利率、营业利润、利润总额、净利润），看具体科目的“变动趋势+具体性质”来判断企业的经营状<br>况</li>
</ol>
<p><strong>盈利分析为什么相对重视毛利率而不是净利率</strong></p>
<p>一个企业的投资回报取决于两个因素：效益（毛利率），效率（周转率）。</p>
<p><strong>为什么要引入EBITDA</strong> EBITDA=净利润+利息+所得税+摊销+折旧，排除了非付现成本，资本结构以及政府因素的影响，可以看作是经营性现金流量的模拟，因此非常受到投资者的关注。实际工作中，我们会识别利润表中非经常性的项目，将EBITDA调节为正常化后的EBITDA, 用于企业价值的评估。</p>
<h3 id="资产负债表"><a href="#资产负债表" class="headerlink" title="资产负债表"></a>资产负债表</h3><p>资产（流动资产+长期资产）=负债（流动负债+长期负债）+所有者权益<br>（净资产）</p>
<p>企业资产=债权人+股东</p>
<p>重点关注：</p>
<ol>
<li>应收账款/存货: 减值风险与周转率、周转天数（营运能力分析）</li>
<li>长期资产（在建工程与固定资产）：减值风险与折旧摊销（影响利润：如<br>京东Non-GAAP收入）</li>
<li>负债分析：分析金融负债与非金融负债（偿债能力分析： 流动比率与资产<br>负债率，国内50%左右，跟行业相关）</li>
</ol>
<p>其他关注点：<br>a.资产报酬率<br>b.营运资本（流动资产-流动负债）与净营运资产（应收-应付）</p>
<h3 id="现金流量表"><a href="#现金流量表" class="headerlink" title="现金流量表"></a>现金流量表</h3><p>与利润的关系</p>
<p>三大活动：经营，投资活动与筹资活动</p>
<p>利润表重点分析：</p>
<ol>
<li>收入趋势与毛利/净利率变动分析</li>
<li>盈利质量分析</li>
</ol>
<p>资产负债表重点分析：</p>
<ol>
<li>营运能力：存货周转率/应收账款周转率</li>
<li>流动性与负债比例分析：资产负债率与金融负债率（短期借款）；营运资金;</li>
<li>净营运资本分析：资金缺口</li>
<li>长期资产分析：减值风险/摊销折旧；投资政策分析（Capex）</li>
<li>资产减值风险</li>
</ol>
<p>现金流重点分析：<br>三大活动占比分析</p>
<h2 id="产品结构"><a href="#产品结构" class="headerlink" title="产品结构"></a>产品结构</h2><h3 id="银行"><a href="#银行" class="headerlink" title="银行"></a>银行</h3><h3 id="券商"><a href="#券商" class="headerlink" title="券商"></a>券商</h3><h3 id="基金"><a href="#基金" class="headerlink" title="基金"></a>基金</h3><h3 id="信贷"><a href="#信贷" class="headerlink" title="信贷"></a>信贷</h3><h3 id="公募"><a href="#公募" class="headerlink" title="公募"></a>公募</h3><h3 id="私募"><a href="#私募" class="headerlink" title="私募"></a>私募</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://chaozh.github.com/2015/08/01/finance-basic/" data-id="cjap5ltup004gb8rl408i1m3r" class="article-share-link">Share</a>
      
        <a href="http://chaozh.github.com/2015/08/01/finance-basic/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/债券/">债券</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/基金/">基金</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/期货/">期货</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/股票/">股票</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2015-shenzhen-jsconf-summary-part-two" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/31/2015-shenzhen-jsconf-summary-part-two/" class="article-date">
  <time datetime="2015-07-31T19:03:16.000Z" itemprop="datePublished">2015-07-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/31/2015-shenzhen-jsconf-summary-part-two/">2015 shen JSconf总结（第二天）　</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>第二天干货非常多，全是实战经验，基本没有什么技术介绍。</p>
<p>##Part Two 2015-07-12</p>
<p>###1. 七牛前端测试实践 - 马逸清<br>angularjs dom隔离，测试不需mock；依赖注入可以mock (service,  controller) 可以使用stub</p>
<p>stub适合返回值依赖，mock行为验证</p>
<p>官方jasmine<br>View状态测试</p>
<p><strong>phantom，sinon(stub)，fixture(karma)</strong></p>
<p>###2. Node Profiler - 朴灵@阿里云alinode<br>hack了部分v8代码，跟CPU Profile相关</p>
<ul>
<li>常用工具: benchmark.js，node-webkit-agent，ab/wrk(压力测试)，–prof &amp; mac-tick-processor(v8)</li>
<li>v8以JIT方式执行js(产出机器码)，以函数为单位处理<br>Crankshaft架构(可以运行时优化 fulCompiler -&gt; optimizeCompiler) P：bailout, deoptimize</li>
<li>Profiler： 更多函数状态，优化建议(v8能否优化) <a href="http://alinode.aliyun.com" target="_blank" rel="noopener">http://alinode.aliyun.com</a></li>
<li>(program) 系统空转</li>
</ul>
<p>? 第一次访问测试</p>
<p>###3. P2P pipes - mafintosh(dat)</p>
<p>demo: multiplayer game(socket)<br>websockets, webrtc</p>
<p>**ndjson, nc, crypto, dupsh(two app in-out pipe), airpaste(udp multicast with pipe), blecat(blutooth with pipe), webcat(webrtc with pipe)</p>
<p>###4. 微服务架构下的服务通信 - 老雷leizongmin @ucdok.com/ superid.me一登<br><strong>后台Node逻辑</strong><br>SDK - 多进程？- API服务器（人脸识别模块）</p>
<p>=》 SDK - API服务器 -人脸识别进程（多线程）</p>
<p>=》 - 更多应用（后台微服务架构）</p>
<p>–&gt; 服务注册（消息队列总线式 / P2P）+远程调用</p>
<p><strong>实现原理</strong></p>
<p>总线可以用redis实现，通信也用redis订阅机制（服务提供者可以动态加入）<br>vs amqp-rpc， eureca.io</p>
<p>未来：备份切换，数据量太大</p>
<p>服务发现 + 服务通信</p>
<p>ppt地址 github.com/leizongmin/clouds</p>
<p><strong>etcd + k8s + docker</strong></p>
<p>###5. 前端服务化之路 - Herman@阿里CXDC 客服中心</p>
<p> 前后端分离-》前端给后端提供接口（服务化）-》web component<br> **flipper.js 支持IE8以上 – webcomponents.js 更好的隔离性</p>
<p>###6. JS lang - hax贺诗俊@百姓网<br>NodeJS + CommonJS -&gt; ES6 module( class, arrow function[this bind], map/set, for..of..[for in] )</p>
<p>WebAssembly</p>
<p><strong>babel(es6 compiler)</strong></p>
<p>###7. JS on Fiber - 庄恒飞@孢子社区fibjs-&gt; 那么社区named.cn<br>fibjs vs nodejs， Fiber-Driven，No Callback</p>
<ul>
<li>Module lib: CommonJS，async require</li>
<li>coroutine.parallel 【改变nodejs单线程】多CPU利用率<br>js，用<br><code>brew install fibjs [http://fibjs.org]</code><br>fibjs底层多种线程(fiber) -&gt; js线程-》work线程池【实际改动了v8下一层，解决了nodejs的callback与计算密集】</li>
</ul>
<p>##Lighting Talk</p>
<ol>
<li>tangrui.net (js in JVM: 1.6 ringo 1.8 nashorm(vert.x/avatar.js)) cde.io</li>
<li>wangyan @oneapm.com (npm2dot) 转换dot格式</li>
<li>dafeng @strikling.com “GraphQL &amp; Relay”: restful api问题：依赖多次发送-&gt;custom endpoint-》 GraphQL帮忙管理</li>
<li>homlinju @fontmin js方案的字体最小化</li>
<li>一狂 @阿里cxdc www.zouyesheng.com angular问题：不单单使用，模块化加载，自己的渲染机制，怎么合作？模块内定义dir最后手动触发bootstrap</li>
<li>EvanYou @vue webpack vue-element.js </li>
<li>xeodou crazyapp.net/#/explore</li>
</ol>
<p>###8. Persistent data structure in JS-NiYue@splunk<br>persistent data structure [like COW] -&gt; concurrency<br>real good: </p>
<ol>
<li>performance（判断状态是否变化）</li>
<li>features on copy（undo/redo，recording/reply，time traveling） </li>
</ol>
<p>实现策略：COW -&gt; structual sharing<br>问题：内存消耗，内存回收</p>
<p><strong>mori, Immutable</strong> </p>
<p><strong>一页千级dom元素？</strong><br>LightTable演示</p>
<p>###9. WebIDE with React - hulufei @coding.net<br>React - Flux - karma</p>
<p>Components: <code>&lt;WebIDE/&gt;</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> App = React.createClass(&#123;</span><br><span class="line">	render: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		&lt;div&gt;<span class="xml"><span class="tag">&lt;<span class="name">Menu</span>/&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">Tree</span>/&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Flux: Dispatchor -&gt; store -&gt; view -&gt; action<br><code>&lt;Editor/&gt;</code>与<code>&lt;SettingModel/&gt;</code> 通信：<br>SettingStore -&gt; SettingAction</p>
<p>Addons: store或action引用API层</p>
<p><strong>roit, ace rather than codemirror</strong><br>QA：store划分标准：组件需要，共享； 数据放store里面方便做数据缓存，返回promise；Flux写太多模板代码；</p>
<p>###10. WebGL &amp; WebVR - Martin @Zurich - archilogic.com @g33konaut</p>
<p>faces + vertices -&gt; GL buffers -&gt; shader code -&gt; print</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> renderer = THREE.WebGLRenderer();</span><br><span class="line"><span class="keyword">var</span> box = <span class="keyword">new</span> <span class="type">THREE</span>.Mesh(</span><br><span class="line">	<span class="keyword">new</span> <span class="type">THREE</span>.BoxGeometry(<span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>),</span><br><span class="line">	<span class="keyword">new</span> <span class="type">Three</span>.MeshBasicMaterial()</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">scene.add(box);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> light = <span class="keyword">new</span> <span class="type">THREE</span>.PointLight()</span><br><span class="line">light.position.<span class="keyword">set</span>();</span><br><span class="line">renderer.render(<span class="function"><span class="keyword">function</span></span>()&#123;</span><br><span class="line">	box.rotation.y += Math.PI / <span class="number">200</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//OBJMITLoader()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//VR</span></span><br><span class="line"><span class="keyword">var</span> vrEffect = <span class="keyword">new</span> <span class="type">THREE</span>.VREffect(render),</span><br><span class="line">	vrControls = <span class="keyword">new</span> <span class="type">THREE</span>.VRControls()</span><br></pre></td></tr></table></figure>
<p>###11. maintainable nodejs - 死马 不四@天猫前端,dead-horse@github koa<br>提供固定的输出</p>
<p>异步try-catch -&gt; promise 可以传递error<br>默认的错误监听函数，可以利用事件方式让外层感知</p>
<p><strong>bluebird, co</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://chaozh.github.com/2015/07/31/2015-shenzhen-jsconf-summary-part-two/" data-id="cjap5ltt8001yb8rlktqvw4r4" class="article-share-link">Share</a>
      
        <a href="http://chaozh.github.com/2015/07/31/2015-shenzhen-jsconf-summary-part-two/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WebGL/">WebGL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/karma/">karma</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nodejs/">nodejs</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2015-shenzhen-jsconf-summary-part-one" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/31/2015-shenzhen-jsconf-summary-part-one/" class="article-date">
  <time datetime="2015-07-31T19:03:16.000Z" itemprop="datePublished">2015-07-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/31/2015-shenzhen-jsconf-summary-part-one/">2015 shen JSconf大会总结（第一天）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>两个星期前7月11～12日在深圳前海举行了第四届中国jsconf会议，第一次参加纪录一下学习内容与个人思考。本次会议由李学斌（hk）推广，wiredcraft公司承办</p>
<p>##Part One 2015-07-11</p>
<p>###1. Database everywhere - EvanYou@Meteor</p>
<ul>
<li>UI - Client data - Server data (sync)<br>Solution: UI - Client data (react, angular, vue)</li>
<li>How about Client &amp; Server data?<br>REST (Backbone Model, ngResource, Restangular, Flux Stores)<br>pull-centric imperative/ trouble with non-conventional APIs/ difficult managing optimistic updates</li>
<li>IDEA: UI - Server data (GraphSQL, JSON Graph, Om Next) <em>not ready</em></li>
</ul>
<p><strong>METEOR</strong>: DDP, Tracker, minimongo(both cli&amp; ser)<br>UI - minimongo - Server data</p>
<p>publish &amp; subscribe?  component-level template</p>
<p><code>$meteor.collection(new Mongo.Collection(&quot;Task&quot;))</code><br><code>Tasks.find().fetch()</code> ???</p>
<p>QA: actions record -&gt; rollback</p>
<p>ppt地址 Slide.com [<a href="http://slides.com/evanyou/shenjs" target="_blank" rel="noopener">http://slides.com/evanyou/shenjs</a>]</p>
<p>###2. ES6 generators - BIHOLT@Netflix<br>node 0.12<br>as ES2015</p>
<ul>
<li>generators: async pro -&gt; sync<br>(Meteor, Babel use Regenerator)</li>
</ul>
<p>a function return a generator obj which is iterable</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> colorGenerator = <span class="function"><span class="keyword">function</span>*(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">let</span> <span class="built_in">color</span> <span class="keyword">of</span> colors) &#123;</span><br><span class="line">		<span class="keyword">yield</span> <span class="built_in">color</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> generator = colorGenerator();</span><br><span class="line"><span class="comment">//use generator.next();</span></span><br><span class="line"><span class="comment">//let values = Array.from(generator);</span></span><br></pre></td></tr></table></figure>
<p>simulate ES7 asyc/await</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">co(function* ()&#123; </span><br><span class="line">	let<span class="built_in"> user </span>= yield 	promiseAjax.<span class="builtin-name">get</span>(<span class="string">"url"</span>); </span><br><span class="line">	handleUserData(user);	</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">async function() &#123;</span><br><span class="line">	let<span class="built_in"> user </span>= await promiseAjax.<span class="builtin-name">get</span>(<span class="string">"url"</span>); 		handleUserData(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>solution: gen store state between calls!</p>
<pre>
//for WebSockets or polling
function *poll() {
    while（true) {
        let id = yield;
        req.get(id).accept('json').end(function(err, data){
        logger.next(data);
        })
    }
}
let poller = poll();
//use poller.next(); poller.next(id++)
</pre>

<p>also call <code>.return()</code> or <code>.throw()</code>[inject into]</p>
<p>ppt地址 speakerdeck.com/btholt</p>
<p>##Lucky Draw<br>raffle.js漏洞百出</p>
<p>###3. Koa&amp;Toa - Yan<br>vs express <code>req, res, next</code> P：异步流程控制</p>
<ul>
<li>koa <code>this, yield next</code> generator 函数 每个中间件可以分为前后两部分，都可以终止 P：流程复杂，第三方暴露</li>
<li>toa vs koa <code>this, yield</code> 回到body <code>this.body</code></li>
</ul>
<p>异步原语：</p>
<ul>
<li>promise 标准接口，链式返回promise，任意多promise组合（多异步）</li>
<li>thunk 新callback形式，返回thunk函数<code>(thunk(function(callback){ return Promise //thunk}))</code></li>
<li>generator <code>(function *() { yield promise })</code></li>
</ul>
<p>###4. AngularJS real-time app - loddit(BohanLi)@BearyChat<br>demo: 二维码刷新 meteor</p>
<p>api server – RPC – keep-alive ser</p>
<p><strong>Protocol</strong>: XMPP / IRC , DDP(Meteor)[quick demo], CRDT(Swarm.js)</p>
<p>Ping/pong to check, use object as singleton, push for everything</p>
<p>Q：分组，消息等信息：普通Obj, Array；事件类型太多（命名，gonn）；</p>
<p>Q：交互性能：减少watch（改用ng-switch）；消息丢失处理：长连接保证，update时序更需要保证；</p>
<p>###5. PM2 - alexandre@Keymetrics<br>a process manager dedicated to Node.js [distributed!]</p>
<ul>
<li><a href="https://keymetrics.io/" target="_blank" rel="noopener">https://keymetrics.io/</a>  code:SHENJS2015</li>
<li><a href="https://github.com/Unitech/pm2" target="_blank" rel="noopener">https://github.com/Unitech/pm2</a></li>
</ul>
<p>##NodeBot Session - ajfisher<br>NodeBots stack [&lt;3] IO Plugin – NodeJS (Johnny Five) – HTTP – clients </p>
<ul>
<li>Adurino.cc IDE</li>
<li>npm install jornny-five -g</li>
<li>nodebotsday.com</li>
<li>github.com/jsconfcn/nodebots-session</li>
</ul>
<p>##light talk</p>
<ol>
<li>undoZen (<code>require(&#39;co&#39;); co.wrap(fun);</code>)</li>
<li>zhangwenli.com/Polyvia vs Naive Random Method<br>selected vectile (webgl sobel edge) -&gt; dynamic -&gt; center of mass 视频淘汰率</li>
<li>pmq20 <code>body.toString()</code></li>
<li>socket 1000连接问题？ ulimit 设置！默认1024</li>
<li>输入法 js</li>
<li>Zearlin/重鱼 </li>
</ol>
<p>###6. NodeJS 分布式应用 - WenTianle@UCloud</p>
<p>C++ -&gt; 分布式RPC架构（配置管理，服务自动发现，自动扩容，脚本）<br>umaster/zookeeper cluster 名称服务 -&gt; rabbitmq/zookeeper 服务异构(扩容)/配置管理</p>
<p>node-amqp 3.4.1</p>
<p><strong>遇到的问题</strong>：</p>
<ol>
<li>nodejs [protobuf extension]</li>
<li>异步编程效率[Fibers]</li>
<li>nodejs 内存泄漏（网络框架中回调函数导致）</li>
<li>异步超时处理（定时清理？）</li>
<li>异步中日志记录（Fibers包装为task queue，带上其id）</li>
<li>rabbitmq ha（ser HA-》cli HA ip选择来解决100s定时断问题，heart beat时间约定机制）</li>
<li>rabbitmq ha 网络闪断导致节点分区</li>
<li>zookeeper session expired 网络断导致，client重连成功后由于session key不同导致server要求再次重连，同时产生一次session expired回调 容易导致内存泄漏</li>
</ol>
<p>###7. JS Frameworks - Eyalarubas.com@EF<br>全是吹水，外国人包装能力真强！</p>
<p>###8. 前端可视化技术 - pissang @Echarts.baidu<br>Canvas vs SVG</p>
<ol>
<li>性能考虑，特效绘制，像素操作</li>
<li>demo：尾迹特效(保存上一帧，另一个canvas alpha值调整)，热力图(像素操作)</li>
</ol>
<p>问题: 没有图像对象(层级，样式，变换)，事件</p>
<p>解决：图像对象管理(借鉴SVG方法)，事件绑定(容器绑定代理，反向循环判断鼠标是否在某图像上，这时要将鼠标进行坐标变换-&gt; 包围盒判断 / 路径的精确判断，js实现<code>isPointPath</code>，<code>isPointInStroke</code> 不需要重新构建路径)</p>
<p>latest: Path2d </p>
<p>WebGL</p>
<ol>
<li>加速二维图像绘制</li>
<li>问题：Shader计算动画小点位置 </li>
</ol>
<p>demo: lambertShading</p>
<p>2D图形处理：Meth -&gt; canvas surface -&gt; canvas -&gt; 2D objects</p>
<h3 id="9-NERD-Disco-TimPietrusky"><a href="#9-NERD-Disco-TimPietrusky" class="headerlink" title="9. NERD Disco - TimPietrusky@"></a>9. NERD Disco - TimPietrusky@</h3><ul>
<li>web audio</li>
</ul>
<pre>
var audio_context = new AudioContext();
var audio_anay = audio_context.analyser();
</pre>

<p>try <em>ndAudio</em> -&gt; <em>ndVisualization</em> -&gt; NeoMatrix Adafruit (nodejs server)</p>
<p>try <strong>web mini api</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://chaozh.github.com/2015/07/31/2015-shenzhen-jsconf-summary-part-one/" data-id="cjap5ltt6001wb8rln4aloskw" class="article-share-link">Share</a>
      
        <a href="http://chaozh.github.com/2015/07/31/2015-shenzhen-jsconf-summary-part-one/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WebGL/">WebGL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/es6/">es6</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nodejs/">nodejs</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-note-database-design" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/27/note-database-design/" class="article-date">
  <time datetime="2015-07-27T22:20:39.000Z" itemprop="datePublished">2015-07-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/移动开发/">移动开发</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/27/note-database-design/">AnyNote数据库与API设计</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>参考Typecho设计数据库</p>
<p>note: </p>
<ul>
<li>nid 自增</li>
<li>title</li>
<li>name</li>
<li>content</li>
<li>created</li>
<li>modified</li>
<li>date</li>
<li>order ?</li>
<li>uid</li>
<li>type 类型</li>
<li>template 使用的模版 ?</li>
<li>status</li>
<li>pwd</li>
<li>parent 多种用法</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`test`</span>.<span class="string">`an_notes`</span> (</span><br><span class="line">  <span class="string">`note_ID`</span> <span class="built_in">BIGINT</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'note id'</span>,</span><br><span class="line">  <span class="string">`user_ID`</span> <span class="built_in">BIGINT</span>(<span class="number">20</span>) <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`note_title`</span> <span class="built_in">TEXT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`note_name`</span> <span class="built_in">VARCHAR</span>(<span class="number">200</span>) <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`note_content`</span> <span class="built_in">TEXT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`note_status`</span> ENUM(<span class="string">'publish'</span>, <span class="string">'draft'</span>, <span class="string">'private'</span>, <span class="string">'static'</span>, <span class="string">'object'</span>, <span class="string">'attachment'</span>, <span class="string">'inherit'</span>, <span class="string">'future'</span>, <span class="string">'pending'</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'draft'</span> <span class="keyword">COMMENT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`note_date`</span> DATETIME <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'publish time'</span>,</span><br><span class="line">  <span class="string">`note_modified`</span> DATETIME <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`note_created`</span> DATETIME <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`note_parent`</span> <span class="built_in">BIGINT</span>(<span class="number">20</span>) <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'can be used in many ways'</span>,</span><br><span class="line">  <span class="string">`note_type`</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'post'</span> <span class="keyword">COMMENT</span> <span class="string">'revision, comment, chat, …'</span>,</span><br><span class="line">  <span class="string">`note_template`</span> <span class="built_in">VARCHAR</span>(<span class="number">45</span>) <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`note_mine_type`</span> <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'image, doc…'</span>,</span><br><span class="line">  <span class="string">`note_comment_status`</span> ENUM(<span class="string">'open'</span>, <span class="string">'closed'</span>, <span class="string">'registerd'</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'open'</span> <span class="keyword">COMMENT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`note_inherit_status`</span> ENUM(<span class="string">'open'</span>, <span class="string">'close'</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'open'</span> <span class="keyword">COMMENT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`note_pwd`</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">''</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`note_ID`</span>)  <span class="keyword">COMMENT</span> <span class="string">''</span>);</span><br></pre></td></tr></table></figure>
<p>[wp怎么实现的post多版本？个人思路：type=”revision”]</p>
<p>Revisions are stored in the posts table.<br>Revisions are stored as children of their associated post (the same thing we do for attachments). They are given a post_status of ‘inherit’, a post_type of ‘revision’, and a post_name of {parent ID}- revision(-#) for regular revisions and {parent ID}-autosave for autosaves.<br>By default, WP keeps track of the changes to title, author, content, excerpt.</p>
<p>revisions: </p>
<ul>
<li>rid</li>
<li>nid-revision-# / nid-autosave-#</li>
<li>uid</li>
<li>content</li>
<li>diff</li>
</ul>
<p>post: [post与note的一对多 github？]</p>
<ul>
<li>pid 自增</li>
<li>title</li>
<li>content 由cid生成，包括style信息</li>
<li>nid[] ? 这块比较复杂，是否允许临时修改(redis缓存)</li>
<li>status</li>
</ul>
<p>meta:</p>
<ul>
<li>mid 自增</li>
<li>name</li>
<li>type tag, category, board, …</li>
<li>desc</li>
<li>parent</li>
</ul>
<p>notemeta: [] tags/books</p>
<ul>
<li>mcid 自增 仅优化用？</li>
<li>mid</li>
<li>nid</li>
<li>order ?</li>
<li>count</li>
<li>status</li>
</ul>
<p>postmeta:</p>
<ul>
<li>pcid</li>
<li>pid</li>
<li>mid</li>
<li>order ?</li>
<li>count</li>
<li>status</li>
</ul>
<p>options:</p>
<ul>
<li>oid 自增</li>
<li>uid 对应uid</li>
<li>key</li>
<li>value</li>
</ul>
<p>user:</p>
<ul>
<li>uid 自增</li>
<li>name</li>
<li>pwd</li>
<li>url</li>
<li>mail</li>
<li>screenName</li>
<li>created</li>
<li>logged</li>
<li>group</li>
<li>authCode</li>
<li>privilige 权限系统</li>
</ul>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> TABLE <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> <span class="symbol">`an_users`</span> (</span><br><span class="line"><span class="symbol">`id`</span> INTEGER <span class="keyword">NOT</span> <span class="literal">NULL</span> auto_increment , </span><br><span class="line"><span class="symbol">`user_ID`</span> BIGINT(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>, </span><br><span class="line"><span class="symbol">`user_name`</span> VARCHAR(<span class="number">60</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>, </span><br><span class="line"><span class="symbol">`user_pwd`</span> VARCHAR(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>, </span><br><span class="line"><span class="symbol">`user_url`</span> VARCHAR(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>, </span><br><span class="line"><span class="symbol">`user_email`</span> VARCHAR(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>, </span><br><span class="line"><span class="symbol">`user_nickname`</span> VARCHAR(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>, </span><br><span class="line"><span class="symbol">`user_created`</span> DATETIME <span class="keyword">NOT</span> <span class="literal">NULL</span>, </span><br><span class="line"><span class="symbol">`user_status`</span> INTEGER <span class="keyword">NOT</span> <span class="literal">NULL</span>, </span><br><span class="line"><span class="symbol">`user_authcode`</span> VARCHAR(<span class="number">80</span>), </span><br><span class="line"><span class="symbol">`user_privilige`</span> INTEGER <span class="keyword">NOT</span> <span class="literal">NULL</span>, </span><br><span class="line"> <span class="keyword">PRIMARY</span> <span class="keyword">KEY</span> (<span class="symbol">`id`</span>)) ENGINE=InnoDB;</span><br></pre></td></tr></table></figure>
<h2 id="API设计"><a href="#API设计" class="headerlink" title="API设计"></a>API设计</h2><p>url(/user)</p>
<ul>
<li>POST /user/signin</li>
<li>POST /user/signout</li>
<li>POST /user/logout</li>
</ul>
<p>url(/notes/:id)</p>
<ul>
<li>POST /notes 创建</li>
<li>GET /notes 列表，分页问题</li>
<li>GET /notes/:id 获得</li>
<li>PUT/POST /notes/:id 更新</li>
<li>DELETE /notes/:id 删除</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://chaozh.github.com/2015/07/27/note-database-design/" data-id="cjap5ltvp006jb8rl7d6pfov3" class="article-share-link">Share</a>
      
        <a href="http://chaozh.github.com/2015/07/27/note-database-design/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/">MySQL</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-create-your-hexo-blog" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/26/create-your-hexo-blog/" class="article-date">
  <time datetime="2015-07-26T20:57:14.000Z" itemprop="datePublished">2015-07-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/26/create-your-hexo-blog/">创建你的hexo博客</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>目前由于hexo的升级。在github上搭建hexo博客的过程与网络上的文章指导内容会有少许变化。</p>
<p>第一步当然还是安装hexo，接着在本地创建自己的hexo博客目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npm install hexo -g</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> hexo init &lt;YOU_BLOG_DIR_NAME&gt;</span></span><br></pre></td></tr></table></figure>
<p>然后切换到那个目录下面，安装必备的node插件<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> &lt;YOU_BLOG_DIR_NAME&gt;</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> npm install </span></span><br><span class="line"><span class="meta">$</span><span class="bash"> npm install hexo-deployer-git --save</span></span><br></pre></td></tr></table></figure></p>
<p>这时你的博客已经准备就绪啦，接着按照自己的需求修改配置文件，需要注意的是deploy部分<br><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">deploy:</span></span><br><span class="line"><span class="symbol">  type:</span> git</span><br><span class="line"><span class="symbol">  repo:</span> <span class="params">&lt;YOUR_GITHUB_REPO_URL&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>万事大吉，可以使用<code>hexo new &lt;POST_NAME&gt;</code>来创建新文章，写完后使用<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo<span class="built_in"> server </span>#本地查看博客效果</span><br><span class="line">$ hexo generate #生成静态文件用于部署</span><br><span class="line">$ hexo deploy #部署同步到Github的项目上</span><br></pre></td></tr></table></figure></p>
<p>有些遗憾的是这个git的deploy插件有点傻，仅把博客的静态文件提交到了远程仓库的master分支，而没有提交原始配置文件。没办法，只能自己动手进行分支同步。<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> &lt;YOU_BLOG_DIR_NAME&gt;</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git init</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git add remote origin &lt;YOUR_GITHUB_REPO_URL&gt;</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit -a</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git push origin master:&lt;YOUR_REMOTE_BRANCHNAME&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>好啦，以后任何位置都可以利用Github同步文章写博客啦</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://chaozh.github.com/2015/07/26/create-your-hexo-blog/" data-id="cjap5lttz0032b8rl9zcrm70y" class="article-share-link">Share</a>
      
        <a href="http://chaozh.github.com/2015/07/26/create-your-hexo-blog/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/github/">github</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nodejs/">nodejs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/开源项目/">开源项目</a></li></ul>

    </footer>
  </div>
  
</article>



  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/archives/2015/page/2/">2</a><a class="extend next" rel="next" href="/archives/2015/page/2/">Next &raquo;</a>
    </nav>
  
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/WordPress开发/">WordPress开发</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/产品设计/">产品设计</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/后端语言/">后端语言</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/新技术跟踪/">新技术跟踪</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/移动开发/">移动开发</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/系统架构/">系统架构</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/系统架构/项目经历/">项目经历</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/系统经验/">系统经验</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/课程总结/">课程总结</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/金融/">金融</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/面试总结/">面试总结</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/项目经历/">项目经历</a><span class="category-list-count">5</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C++</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CPU/">CPU</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/InnoDB/">InnoDB</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS模板/">JS模板</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/">JVM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux设置/">Linux设置</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MVCC/">MVCC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mac/">Mac</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/">MySQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/">PHP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/">Redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP/">TCP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WP主题/">WP主题</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WP实现/">WP实现</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WP插件/">WP插件</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WP设置/">WP设置</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebGL/">WebGL</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Zookeeper/">Zookeeper</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cache-coherence/">cache coherence</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/">es6</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fabric/">fabric</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/google/">google</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/history/">history</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html5/">html5</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ios应用/">ios应用</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iptv/">iptv</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/join/">join</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/karma/">karma</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kv存储/">kv存储</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/memory/">memory</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mutex/">mutex</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/">node</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/">nodejs</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/paxos/">paxos</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/raft/">raft</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/url重定向/">url重定向</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web2-0/">web2.0</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zookeeper/">zookeeper</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/中文汉化/">中文汉化</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/事务/">事务</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/互联网企业/">互联网企业</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/债券/">债券</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/内核/">内核</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分布式锁/">分布式锁</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/区块链/">区块链</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/华为/">华为</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/基金/">基金</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/外设/">外设</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/存储/">存储</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/实习/">实习</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/开源项目/">开源项目</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/敏捷开发/">敏捷开发</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/无锁并发/">无锁并发</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/日志/">日志</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/期货/">期货</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/栅格系统/">栅格系统</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/科研/">科研</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/索引/">索引</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编译器/">编译器</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网络/">网络</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/股票/">股票</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/脚本加载/">脚本加载</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/腾讯/">腾讯</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/苹果/">苹果</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/语法/">语法</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/读写锁/">读写锁</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/调度/">调度</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/金山/">金山</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/锁/">锁</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/键盘/">键盘</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/隔离级别/">隔离级别</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/面试/">面试</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/项目管理/">项目管理</a><span class="tag-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/C/" style="font-size: 10px;">C++</a> <a href="/tags/CPU/" style="font-size: 10px;">CPU</a> <a href="/tags/CSS/" style="font-size: 11.67px;">CSS</a> <a href="/tags/InnoDB/" style="font-size: 10px;">InnoDB</a> <a href="/tags/JS模板/" style="font-size: 11.67px;">JS模板</a> <a href="/tags/JVM/" style="font-size: 10px;">JVM</a> <a href="/tags/Linux设置/" style="font-size: 10px;">Linux设置</a> <a href="/tags/MVCC/" style="font-size: 10px;">MVCC</a> <a href="/tags/Mac/" style="font-size: 10px;">Mac</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/PHP/" style="font-size: 11.67px;">PHP</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/TCP/" style="font-size: 10px;">TCP</a> <a href="/tags/WP主题/" style="font-size: 16.67px;">WP主题</a> <a href="/tags/WP实现/" style="font-size: 10px;">WP实现</a> <a href="/tags/WP插件/" style="font-size: 16.67px;">WP插件</a> <a href="/tags/WP设置/" style="font-size: 11.67px;">WP设置</a> <a href="/tags/WebGL/" style="font-size: 11.67px;">WebGL</a> <a href="/tags/Zookeeper/" style="font-size: 10px;">Zookeeper</a> <a href="/tags/cache-coherence/" style="font-size: 10px;">cache coherence</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/es6/" style="font-size: 10px;">es6</a> <a href="/tags/fabric/" style="font-size: 11.67px;">fabric</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/google/" style="font-size: 11.67px;">google</a> <a href="/tags/history/" style="font-size: 10px;">history</a> <a href="/tags/html5/" style="font-size: 15px;">html5</a> <a href="/tags/ios应用/" style="font-size: 10px;">ios应用</a> <a href="/tags/iptv/" style="font-size: 10px;">iptv</a> <a href="/tags/javascript/" style="font-size: 15px;">javascript</a> <a href="/tags/join/" style="font-size: 10px;">join</a> <a href="/tags/js/" style="font-size: 10px;">js</a> <a href="/tags/karma/" style="font-size: 10px;">karma</a> <a href="/tags/kv存储/" style="font-size: 10px;">kv存储</a> <a href="/tags/memory/" style="font-size: 10px;">memory</a> <a href="/tags/mutex/" style="font-size: 10px;">mutex</a> <a href="/tags/node/" style="font-size: 10px;">node</a> <a href="/tags/nodejs/" style="font-size: 13.33px;">nodejs</a> <a href="/tags/paxos/" style="font-size: 11.67px;">paxos</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/raft/" style="font-size: 10px;">raft</a> <a href="/tags/url重定向/" style="font-size: 10px;">url重定向</a> <a href="/tags/web2-0/" style="font-size: 10px;">web2.0</a> <a href="/tags/zookeeper/" style="font-size: 11.67px;">zookeeper</a> <a href="/tags/中文汉化/" style="font-size: 11.67px;">中文汉化</a> <a href="/tags/事务/" style="font-size: 11.67px;">事务</a> <a href="/tags/互联网企业/" style="font-size: 11.67px;">互联网企业</a> <a href="/tags/债券/" style="font-size: 11.67px;">债券</a> <a href="/tags/内核/" style="font-size: 11.67px;">内核</a> <a href="/tags/分布式锁/" style="font-size: 10px;">分布式锁</a> <a href="/tags/区块链/" style="font-size: 13.33px;">区块链</a> <a href="/tags/华为/" style="font-size: 10px;">华为</a> <a href="/tags/基金/" style="font-size: 11.67px;">基金</a> <a href="/tags/外设/" style="font-size: 10px;">外设</a> <a href="/tags/存储/" style="font-size: 10px;">存储</a> <a href="/tags/实习/" style="font-size: 15px;">实习</a> <a href="/tags/开源项目/" style="font-size: 10px;">开源项目</a> <a href="/tags/敏捷开发/" style="font-size: 10px;">敏捷开发</a> <a href="/tags/数据库/" style="font-size: 18.33px;">数据库</a> <a href="/tags/无锁并发/" style="font-size: 10px;">无锁并发</a> <a href="/tags/日志/" style="font-size: 10px;">日志</a> <a href="/tags/期货/" style="font-size: 11.67px;">期货</a> <a href="/tags/栅格系统/" style="font-size: 10px;">栅格系统</a> <a href="/tags/科研/" style="font-size: 10px;">科研</a> <a href="/tags/算法/" style="font-size: 18.33px;">算法</a> <a href="/tags/索引/" style="font-size: 11.67px;">索引</a> <a href="/tags/编译器/" style="font-size: 10px;">编译器</a> <a href="/tags/网络/" style="font-size: 10px;">网络</a> <a href="/tags/股票/" style="font-size: 11.67px;">股票</a> <a href="/tags/脚本加载/" style="font-size: 10px;">脚本加载</a> <a href="/tags/腾讯/" style="font-size: 15px;">腾讯</a> <a href="/tags/苹果/" style="font-size: 10px;">苹果</a> <a href="/tags/语法/" style="font-size: 11.67px;">语法</a> <a href="/tags/读写锁/" style="font-size: 10px;">读写锁</a> <a href="/tags/调度/" style="font-size: 10px;">调度</a> <a href="/tags/金山/" style="font-size: 10px;">金山</a> <a href="/tags/锁/" style="font-size: 10px;">锁</a> <a href="/tags/键盘/" style="font-size: 10px;">键盘</a> <a href="/tags/隔离级别/" style="font-size: 10px;">隔离级别</a> <a href="/tags/面试/" style="font-size: 20px;">面试</a> <a href="/tags/项目管理/" style="font-size: 11.67px;">项目管理</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">December 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">September 2013</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">August 2013</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/06/">June 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/04/">April 2013</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">March 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/02/">February 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">January 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">December 2012</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/11/">November 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/10/">October 2012</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/09/">September 2012</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/06/">June 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/04/">April 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/03/">March 2012</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/02/">February 2012</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/09/">September 2011</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/05/">May 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/04/">April 2011</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/03/">March 2010</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/12/02/Qconf-summary/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/12/02/Introduction-to-Basic-Fixed-Income-Securities/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/04/08/blockchain-tech-summary/">区块链技术总结与架构实战</a>
          </li>
        
          <li>
            <a href="/2017/03/23/fabric-ca-design/">Hyperledger Fabric CA设计</a>
          </li>
        
          <li>
            <a href="/2017/02/05/sicp-charpter-two/">SICP第二章总结</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Chao Zheng<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
  </div>
  </footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/php-development-env-setup-in-win7-x64.html" class="mobile-nav-link">PHP-WIN</a>
  
</nav>
    
<script>
  var disqus_shortname = 'chaozh';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>